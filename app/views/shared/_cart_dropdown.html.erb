<div id="cart_dropdown" class="bg-gray-900 rounded-md p-4 shadow-md w-80">
  <% if items.blank? %>
    <div class="text-sm text-gray-400">Your cart is empty.</div>
  <% else %>
    <ul class="space-y-3">
      <% items.each do |it| %>
        <li class="flex items-center justify-between">
          <div class="flex-1">
            <div class="text-sm text-white"><%= it.product.name %></div>
            <div class="text-xs text-gray-400">Qty: <%= it.quantity %></div>
          </div>
          <div class="ml-4 text-sm text-indigo-300"><%= number_to_currency(it.product.price * it.quantity) %></div>
          <div class="ml-3">
            <%= button_to 'Remove', cart_items_path(product_id: it.product.id), method: :delete, form: { data: { turbo: true } }, class: 'text-xs text-red-400' %>
          </div>
        </li>
      <% end %>
    </ul>

    <div class="mt-4 flex items-center justify-between">
      <div class="text-sm text-gray-300">Total</div>
      <div class="text-sm text-white font-semibold">
        <%= number_to_currency(items.sum { |it| it.product.price * it.quantity }) %>
      </div>
    </div>

    <div class="mt-4">
      <%= button_to 'Checkout', checkout_path, method: :post, class: 'w-full inline-flex justify-center py-2 px-4 bg-indigo-600 text-white rounded', form: { data: { turbo: false } } %>
    </div>
  <% end %>
  <div id="cart_debug"></div>
</div>
